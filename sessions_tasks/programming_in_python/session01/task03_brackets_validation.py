"""
Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ 3. ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÐºÐ¾Ð±Ð¾Ðº.

Ð£ÑÐ»Ð¾Ð²Ð¸Ðµ:
    ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ Ñ€Ð°ÑÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ ÐºÑ€ÑƒÐ³Ð»Ñ‹Ñ…, ÐºÐ²Ð°Ð´Ñ€Ð°Ñ‚Ð½Ñ‹Ñ… Ð¸ Ñ„Ð¸Ð³ÑƒÑ€Ð½Ñ‹Ñ… ÑÐºÐ¾Ð±Ð¾Ðº.

ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:
    Ð¡Ñ‚Ñ€Ð¾ÐºÐ° ÑÑ‡Ð¸Ñ‚Ð°ÐµÑ‚ÑÑ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾Ð¹, ÐµÑÐ»Ð¸:
        - ÐºÐ°Ð¶Ð´Ð°Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð°Ñ ÑÐºÐ¾Ð±ÐºÐ° Ð¸Ð¼ÐµÐµÑ‚ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰ÑƒÑŽ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰ÑƒÑŽ Ñ‚Ð¾Ð³Ð¾ Ð¶Ðµ Ñ‚Ð¸Ð¿Ð°;
        - Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ðµ ÑÐºÐ¾Ð±ÐºÐ¸ Ð½Ðµ Ð¿Ð¾ÑÐ²Ð»ÑÑŽÑ‚ÑÑ Ñ€Ð°Ð½ÑŒÑˆÐµ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ñ…;
        - Ð² ÐºÐ¾Ð½Ñ†Ðµ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑÑ‚ÐµÐº ÑÐºÐ¾Ð±Ð¾Ðº Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð¿ÑƒÑÑ‚Ñ‹Ð¼.

ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹:
    "()[]{}" -> True
    "([{}])" -> True
    "([)]" -> False
    "(((" -> False
    "abc(def)" -> True
"""

from typing import Dict


def is_brackets_balanced(s: str) -> bool:
    """
    ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ Ñ€Ð°ÑÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ ÑÐºÐ¾Ð±Ð¾Ðº Ð² ÑÑ‚Ñ€Ð¾ÐºÐµ.

    ÐÑ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:
        s (str): Ð²Ñ…Ð¾Ð´Ð½Ð°Ñ ÑÑ‚Ñ€Ð¾ÐºÐ°, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð°Ñ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð»ÑŒÐ½Ñ‹Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹, Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ ÑÐºÐ¾Ð±ÐºÐ¸.

    Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚:
        bool: True, ÐµÑÐ»Ð¸ ÑÐºÐ¾Ð±ÐºÐ¸ Ñ€Ð°ÑÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾, Ð¸Ð½Ð°Ñ‡Ðµ False.

    ÐÐ»Ð³Ð¾Ñ€Ð¸Ñ‚Ð¼:
        - ÑÐ¾Ð·Ð´Ð°ÐµÐ¼ ÑÐ»Ð¾Ð²Ð°Ñ€ÑŒ Ð¿Ð°Ñ€ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ñ… Ð¸ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ñ… ÑÐºÐ¾Ð±Ð¾Ðº;
        - Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ ÑÑ‚ÐµÐº Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ñ… ÑÐºÐ¾Ð±Ð¾Ðº;
        - Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ ÑÐ¸Ð¼Ð²Ð¾Ð»Ð°:
            - ÐµÑÐ»Ð¸ Ð¾Ð½ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ð¹ â€” Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð² ÑÑ‚ÐµÐº;
            - ÐµÑÐ»Ð¸ Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð¸Ð¹ â€” Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²Ð¸Ðµ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¼Ñƒ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾Ð¼Ñƒ;
        - ÐµÑÐ»Ð¸ Ð¿Ð¾ÑÐ»Ðµ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÑÑ‚ÐµÐº Ð¿ÑƒÑÑ‚ â€” ÑÐºÐ¾Ð±ÐºÐ¸ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ñ‹.

    ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ€ÑƒÑ‡Ð½Ð¾Ð³Ð¾ Ð²Ñ‹Ð·Ð¾Ð²Ð°:
        from sessions_tasks.programming_in_python.session01.task03_brackets_validation import is_brackets_balanced
        print(is_brackets_balanced("()[]{}")) # True
        print(is_brackets_balanced("([)]")) # False
    """
    # ÐºÐ»ÑŽÑ‡ - Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð°Ñ ÑÐºÐ¾Ð±ÐºÐ°, Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ - Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð°Ñ ÑÐºÐ¾Ð±ÐºÐ°
    pairs: Dict[str, str] = {")": "(", "]": "[", "}": "{"}
    stack: list[str] = []

    for char in s:
        # Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð°Ñ ÑÐºÐ¾Ð±ÐºÐ°
        if char in pairs.values():
            stack.append(char)
        # Ð·Ð°ÐºÑ€Ñ‹Ð²Ð°ÑŽÑ‰Ð°Ñ ÑÐºÐ¾Ð±ÐºÐ°
        elif char in pairs:
            if not stack or stack[-1] != pairs[char]:
                return False
            stack.pop()

    return not stack


if __name__ == "__main__":
    """
    Ð—Ð°Ð¿ÑƒÑÐº Ñ‡ÐµÑ€ÐµÐ· poetry:
        poetry run python sessions_tasks/programming_in_python/session01/task03_brackets_validation.py
    """
    examples = [
        "()[]{}",
        "([{}])",
        "([)]",
        "(((",
        "abc(def)",
        "a + (b * [c - {d / e}])",
        "((a+b]",
    ]

    print("ðŸ§© Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ ÑÐºÐ¾Ð±Ð¾Ðº:\n")
    for text in examples:
        print(f"{text:25} -> {is_brackets_balanced(text)}")
