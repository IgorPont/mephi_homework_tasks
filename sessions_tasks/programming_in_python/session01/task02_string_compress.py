"""
–ó–∞–¥–∞–Ω–∏–µ 2. –°–∂–∞—Ç–∏–µ —Å—Ç—Ä–æ–∫–∏.

–£—Å–ª–æ–≤–∏–µ:
    –ù–∞–ø–∏—à–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∏ —Å–∂–∏–º–∞–µ—Ç –µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.
    –°—Ç—Ä–æ–∫–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–µ–ª—ã –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã, –∏ —Ç—Ä–µ–±—É—é—Ç —Ç–æ—á–Ω–æ–≥–æ —É—á–µ—Ç–∞ –¥–ª–∏–Ω—ã –ø—Ä–∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏.
    –°–∂–∞—Ç–∏–µ —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ—Ä–∏—è–º–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–∏–º–≤–æ–ª+–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ,
    –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–ª–∏–Ω–∞ —Å–∂–∞—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ —Å—Ç—Ä–æ–≥–æ –º–µ–Ω—å—à–µ –∏—Å—Ö–æ–¥–Ω–æ–π.

–ü—Ä–∏–º–µ—Ä—ã:
    –≤—Ö–æ–¥: "aaabbc" -> –≤—ã–≤–æ–¥: "a3b2c"
    –≤—Ö–æ–¥: "abcd" -> –≤—ã–≤–æ–¥: "abcd" (—Ç–∞–∫ –∫–∞–∫ —Å–∂–∞—Ç–∞—è –Ω–µ –∫–æ—Ä–æ—á–µ)
    –≤—Ö–æ–¥: "111112222233" -> –≤—ã–≤–æ–¥: "152532"
"""


def compress_string(s: str) -> str:
    """
    –°–∂–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –∑–∞–º–µ–Ω—è—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ —Å–∏–º–≤–æ–ª + –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π.

    –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
        s (str): –∏—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–µ–ª—ã –∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã).

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        str: —Å–∂–∞—Ç–∞—è —Å—Ç—Ä–æ–∫–∞, –µ—Å–ª–∏ –æ–Ω–∞ –∫–æ—Ä–æ—á–µ –∏—Å—Ö–æ–¥–Ω–æ–π, –∏–Ω–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É.

    –ê–ª–≥–æ—Ä–∏—Ç–º:
        - –ü—Ä–æ—Ö–æ–¥–∏–º —Å—Ç—Ä–æ–∫—É –ø–æ—Å–∏–º–≤–æ–ª—å–Ω–æ;
        - –î–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –¥–æ–±–∞–≤–ª—è–µ–º "<—Å–∏–º–≤–æ–ª><–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ>", –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ > 1;
        - –ï—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ = 1, –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å–∏–º–≤–æ–ª;
        - –í –∫–æ–Ω—Ü–µ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –¥–ª–∏–Ω—É —Å–∂–∞—Ç–æ–π –∏ –∏—Å—Ö–æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π –≤–∞—Ä–∏–∞–Ω—Ç.

    –ü—Ä–∏–º–µ—Ä—ã:
        –≤—Ö–æ–¥: "aaabbc" -> –≤—ã–≤–æ–¥: "a3b2c"
        –≤—Ö–æ–¥: "abcd" -> –≤—ã–≤–æ–¥: "abcd" (—Ç–∞–∫ –∫–∞–∫ —Å–∂–∞—Ç–∞—è –Ω–µ –∫–æ—Ä–æ—á–µ)
        –≤—Ö–æ–¥: "111112222233" -> –≤—ã–≤–æ–¥: "152532"

    –ü—Ä–∏–º–µ—Ä —Ä—É—á–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞:
        from sessions_tasks.programming_in_python.session01.task02_string_compress import compress_string
        print(compress_string("aaabbc")) # a3b2c
        print(compress_string("abcd")) # abcd
        print(compress_string("111112222233")) # 152532
    """
    if not s:
        return s

    parts: list[str] = []
    current_char = s[0]
    count = 1

    for ch in s[1:]:
        if ch == current_char:
            count += 1
        else:
            # –¥–æ–±–∞–≤–ª—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—É—é —Å–µ—Ä–∏—é –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–∏–º–≤–æ–ª–æ–≤
            parts.append(current_char if count == 1 else f"{current_char}{count}")
            current_char = ch
            count = 1

    # –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–µ—Ä–∏—é
    parts.append(current_char if count == 1 else f"{current_char}{count}")

    # –æ–±—ä–µ–¥–∏–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–∏–π –≤ –∏—Ç–æ–≥–æ–≤—É—é —Å—Ç—Ä–æ–∫—É
    compressed = "".join(parts)

    # –≤–æ–∑–≤—Ä–∞—â–∞–µ–º, –µ—Å–ª–∏ —Å–∂–∞—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –∫–æ—Ä–æ—á–µ –∏—Å—Ö–æ–¥–Ω–æ–π
    return compressed if len(compressed) < len(s) else s


if __name__ == "__main__":
    """
    –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Poetry:
        poetry run python sessions_tasks/programming_in_python/session01/task02_string_compress.py
    """
    examples = ["aaabbc", "abcd", "", "    ", "!!**", "aabccccaaa", "111112222233"]

    print("üß© –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã compress_string():\n")
    for text in examples:
        print(f"–í—Ö–æ–¥: {repr(text)} -> –í—ã—Ö–æ–¥: {compress_string(text)}")
